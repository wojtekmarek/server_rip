<style>
    .errorafterNamedeceased::after {
    content: "Uzupełnij pole dozwolone tylko litery";
    color: red;
    width: 20px;
    margin-bottom: -20px;
    position: relative;
    top: 68px;
    left: -30px;
}
 .errorafterLastNamedeceased::after {
    content: "Uzupełnij pole dozwolone tylko litery";
    color: red;
    width: 20px;
    margin-bottom: -20px;
    position: relative;
    top: 68px;
    left: -69px;
}
 .errorafterDateOfBirth::after {
    content: "Uzupełnij pole zgodnie z wytycznymi powyżej";
    color: red;
    width: 20px;
    margin-bottom: -20px;
    margin-left: -180px;
    position: relative;
    top: 68px;
    left: -67px;
}
.errorafterDateOfDeath::after {
    content: "Uzupełnij pole zgodnie z wytycznymi powyżej";
    color: red;
    width: 20px;
    margin-bottom: -20px;
    margin-left: -180px;
    position: relative;
    top: 68px;
    left: -43px;
}
.errorafterDateBurial::after {
    content: "Uzupełnij pole zgodnie z wytycznymi powyżej";
    color: red;
    width: 20px;
    margin-bottom: -20px;
    margin-left: -180px;
    position: relative;
    top: 68px;
    left: -68px;
}
.errorafterTypeOFburial::after {
    content: "Wybierz z listy";
    color: red;
    width: 20px;
    margin-bottom: -20px;
    position: relative;
    top: 68px;
    left: -128px;
}


  .errorafter {
    display: block;
    border-color: red;
  }
    .formeditburial {
        width: 400px;
        display: flex;
        flex-direction: column;
        align-self: center;
        margin-top: 30px;
    }
</style>

<form action="{{action}}" class="formeditburial" method="POST" autocomplete="off">
    <h3>{{viewTitle}}</h3>
    <div class="form-group">
        <label for="IdGraveQuaters">Id Kwatery do pochówku</label>
        <input type="text" class="form-control"id="GraveQuartersnumberview" disabled name="GraveQuartersnumberview"
            value="{{burial.GraveQuartersnumber}}">
        <input type="hidden" id="IdGraveQuaters" name="GraveQuartersnumber" value="{{burial.GraveQuartersnumber}}">
    </div>
    <div class="form-group">
        <label>Id Kwatery</label><br>
        <input type="text" class="form-control" id="_idBurialview" disabled name="_idBurialview" value="{{burial._id}}">
        <input type="hidden" id="_idBurial" name="_idBurial" value="{{burial._id}}">
    </div>
    <div class="form-group">
        <label id="divNamedeceased">Imię</label>
        <input type="text" class="form-control" id="Namedeceased" name="Namedeceased" placeholder="{{burial.Namedeceased}}"
            value="{{burial.Namedeceased}}" required pattern="[A-Za-zżźćńółęąśŻŹĆĄŚĘŁÓŃ]{2,99}">
    </div>
    <div class="form-group">
        <label id="divLastNamedeceased">Nazwisko</label>
        <input type="text" class="form-control" name="LastNamedeceased" id="LastNamedeceased" placeholder="{{burial.LastNamedeceased}}"
            value="{{burial.LastNamedeceased}}" required pattern="[A-Za-zżźćńółęąśŻŹĆĄŚĘŁÓŃ]{2,99}">
    </div>
    <div class="form-group">
        <label id="divTypeOFburial">Rodzaj pochówku </label>
        <select class="form-control" disabled id="TypeOFburial" name="TypeOFburial" placeholder="{{burial.Burialtype}}"
            value="{{burial.Burialtype}}">
            <option value="{{burial.Burialtype}}">{{burial.Burialtype}}</option>
        </select>

    </div>
    <div class="form-group">
        <label id="divDateOfBirth" >Data Urodzenia(dzień-miesiąc-rok)</label>
        <input type="text" class="form-control" id="DateOfBirth" name="DateOfBirth"
            pattern="(?:(?:31(-)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(-)
(?:0?[13-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(-)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(-)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$"
            placeholder="{{burial.DateOfBirthString}}" value="{{burial.DateOfBirthString}}" required>
    </div>
    <div class="form-group">
        <label id="divDateOfDeath" >Data śmierci(dzień-miesiąc-rok)</label>
        <input type="text" class="form-control" id="DateOfDeath"  name="DateOfDeath" 
            pattern="^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[13-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$"
            placeholder="{{burial.DateOfDeathstring}}" value="{{burial.DateOfDeathstring}}" required>
    </div>
    <div class="form-group">
        <label id="divDateBurial">Data pochówku(dzień-miesiąc-rok)</label>
        <input type="text" class="form-control" id="DateBurial" name="DateBurial"
            pattern="^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[13-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$"
            placeholder="{{burial.DateBurialstring}}" value="{{burial.DateBurialstring}}" required>'
    </div>
    <div class="form-group">
        <button type="submit" class="btn btn-info">Zapisz zmiany</button>
        <a class="btn btn-secondary" href="/burial/list">Pokaz listę</a>
        <a type="button" id="createexumation" class="btn btn-danger mt-2"
            href='/exhumation/add/?name=burial&&id={{burial._id}}'>Dodaj ekshumacje do pochówku</a>

    </div>



</form>
<script>
    function showerror(target) {
    document.getElementById("div" + target.id).classList.add("errorafter" + target.id);
    target.classList.add("errorafter");
 
  }
  function hideerror(target) {
    document.getElementById("div" + target.id).classList.remove("errorafter" + target.id);
    target.classList.remove("errorafter");
  }
  function capitalizeFirstLetter(target) {
    let string=target.value;
    let upcasestring=string.charAt(0).toUpperCase() + string.slice(1);
    target.value=upcasestring;
}
  function validdate(target) {

    let rexdate = new RegExp('^[0-9]{1,2}-[0-9]{1,2}-[0-9]{4}$');
    if (rexdate.test(target.value)) {
      hideerror(target);
      return true
    } else {
      showerror(target);
      return false
    }

  }
  function validname(target) {
   
    let rexname = new RegExp('^[A-Za-zżźćńółęąśŻŹĆĄŚĘŁÓŃ]+$');
    //console.log("check name");

    if (rexname.test(target.value)) {
      hideerror(target);
      return true
    } else {
      showerror(target);
      return false
    }
  }
    function validdateselect(target){
    if (target.value!=="") {
      hideerror(target);
      return true
    } else {
      showerror(target);
      return false
    }
  }
  document.addEventListener('invalid', (function () {
    return function (e) {
      console.log(e.target.id);
      e.preventDefault();
      
      if (e.target.id === "Namedeceased"||e.target.id === "LastNamedeceased") {
        validname(e.target);
      } else if(e.target.id==="TypeOFburial"){
        validdateselect(e.target);
      }else{
        validdate(e.target);
      }
     
    };
  })(), true);
  document.getElementById("Namedeceased").addEventListener('change', async (event) => {
    validname(event.target);
    capitalizeFirstLetter(event.target);
    
  });
   document.getElementById("LastNamedeceased").addEventListener('change', async (event) => {
    validname(event.target);
    capitalizeFirstLetter(event.target);
    
  });
   document.getElementById("DateOfBirth").addEventListener('change', async (event) => {
    validdate(event.target);
        
  });
  document.getElementById("DateOfDeath").addEventListener('change', async (event) => {
    validdate(event.target);
        
  });
  document.getElementById("DateBurial").addEventListener('change', async (event) => {
    validdate(event.target);
        
  });
    document.getElementById("TypeOFburial").addEventListener('change', async (event) => {
    validdateselect(event.target);
        
  });
</script>